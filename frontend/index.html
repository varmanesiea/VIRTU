<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Vote App</title>
    <style>
        body { font-family: Arial; text-align: center; padding: 50px; background: #667eea; color: white; }
        .btn { padding: 20px 40px; margin: 10px; font-size: 18px; cursor: pointer; border: none; border-radius: 5px; }
        .btn:hover { opacity: 0.8; }
        #results { margin-top: 30px; background: white; color: #333; padding: 20px; border-radius: 10px; }
    </style>
</head>
<body>
    <h1>Application de Vote</h1>
    <p>Quel langage preferez-vous ?</p>
    <button class="btn" style="background:#3776ab" onclick="vote('Python')">Python</button>
    <button class="btn" style="background:#f7df1e;color:#000" onclick="vote('JavaScript')">JavaScript</button>
    <div id="results">Chargement...</div>

    <script>
        const API = '/api';
        
        async function vote(option) {
            await fetch(API + '/vote', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({option})
            });
            loadResults();
        }
        
        async function loadResults() {
            const res = await fetch(API + '/results');
            const data = await res.json();
            document.getElementById('results').innerHTML = data.results
                .map(r => `<p>${r.option}: ${r.votes} votes</p>`).join('') || 'Aucun vote';
        }
        
        loadResults();
        setInterval(loadResults, 5000);
    </script>
</body>
</html>
